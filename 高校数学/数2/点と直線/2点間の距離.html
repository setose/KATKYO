<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°IIï¼šæ•°ç›´ç·šä¸Šã®è·é›¢ï¼ˆå¾¹åº•è§£èª¬ï¼‰</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f8fafc;
            color: #334155;
            line-height: 1.8;
        }

        .math-font {
            font-family: 'Times New Roman', serif;
            font-style: italic;
        }

        /* ã‚«ã‚¹ã‚¿ãƒ ã‚«ãƒ¼ãƒ‰ */
        .card {
            background-color: white;
            border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid #e2e8f0;
        }

        /* å¼·èª¿ãƒœãƒƒã‚¯ã‚¹ */
        .highlight-box {
            background-color: #f0f9ff;
            border-left: 5px solid #0ea5e9;
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0.5rem;
        }

        /* å¹ãå‡ºã—é¢¨è§£èª¬ */
        .bubble {
            position: relative;
            background: #ffffff;
            border: 2px solid #cbd5e1;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }
        .bubble::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 20px;
            border-width: 10px 10px 0;
            border-style: solid;
            border-color: #cbd5e1 transparent;
            display: block;
            width: 0;
        }

        canvas {
            touch-action: none; /* ã‚¹ãƒãƒ›ã§ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é˜²æ­¢ */
        }
    </style>
</head>
<body class="py-8 px-4 flex flex-col items-center">

    <header class="w-full max-w-3xl mb-8 text-center">
        <span class="text-blue-600 font-bold tracking-wider text-sm uppercase">Math II / Points and Lines</span>
        <h1 class="text-3xl md:text-4xl font-bold text-slate-800 mt-2">æ•°ç›´ç·šä¸Šã®2ç‚¹é–“ã®è·é›¢</h1>
        <p class="text-slate-500 mt-2">ãªãœã€Œåº§æ¨™ã®å·®ã€ã§æ±‚ã‚ã‚‰ã‚Œã‚‹ã®ã‹ï¼Ÿ çµ¶å¯¾å€¤ã®æ„å‘³ã¨ã¯ï¼Ÿ</p>
    </header>

    <main class="w-full max-w-3xl">

        <!-- è§£èª¬ã‚»ã‚¯ã‚·ãƒ§ãƒ³1ï¼šåŸºæœ¬ã®è€ƒãˆæ–¹ -->
        <section class="card">
            <h2 class="text-2xl font-bold text-slate-800 mb-6 flex items-center">
                <span class="bg-slate-800 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm mr-3">1</span>
                åŸºæœ¬ï¼šè·é›¢ã¯ã€Œå¤§ãã„æ–¹å¼•ãå°ã•ã„æ–¹ã€
            </h2>
            
            <div class="space-y-4">
                <p>
                    æ•°ç›´ç·šä¸Šã®2ç‚¹é–“ã®è·é›¢ã‚’è€ƒãˆã‚‹ã¨ãã€æœ€ã‚‚åŸºæœ¬çš„ãªãƒ«ãƒ¼ãƒ«ã¯ã“ã‚Œã§ã™ã€‚<br>
                    <strong class="text-lg text-indigo-600 bg-indigo-50 px-2 py-1 rounded">è·é›¢ = ï¼ˆå³å´ã®åº§æ¨™ï¼‰ - ï¼ˆå·¦å´ã®åº§æ¨™ï¼‰</strong>
                </p>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                    <div class="bg-slate-50 p-4 rounded-lg">
                        <h3 class="font-bold text-slate-700 mb-2">ä¾‹1ï¼šæ­£ã®æ•°åŒå£«</h3>
                        <p>3 ã¨ 7 ã®è·é›¢ã¯ï¼Ÿ</p>
                        <p class="text-2xl font-mono text-center my-2 text-slate-600">7 - 3 = 4</p>
                        <div class="text-xs text-center text-slate-400">ï¼ˆå³ï¼‰-ï¼ˆå·¦ï¼‰</div>
                    </div>
                    <div class="bg-slate-50 p-4 rounded-lg">
                        <h3 class="font-bold text-slate-700 mb-2">ä¾‹2ï¼šè² ã®æ•°ãŒæ··ã–ã‚‹ã¨ã</h3>
                        <p>-2 ã¨ 3 ã®è·é›¢ã¯ï¼Ÿ</p>
                        <p class="text-2xl font-mono text-center my-2 text-slate-600">3 - (-2) = 5</p>
                        <div class="text-xs text-center text-slate-400">ãƒã‚¤ãƒŠã‚¹ã‚’å¼•ãï¼è¶³ã™</div>
                    </div>
                </div>

                <div class="highlight-box">
                    <h3 class="font-bold text-blue-700 mb-2">ğŸ¤” ãªãœå¼•ãç®—ãªã®ï¼Ÿ</h3>
                    <p>
                        ã€Œè·é›¢ã€ã¨ã¯ã€2ã¤ã®å€¤ã®ã€Œéš”ãŸã‚Šï¼ˆã‚®ãƒ£ãƒƒãƒ—ï¼‰ã€ã®ã“ã¨ã§ã™ã€‚<br>
                        æ•°ç›´ç·šã®ã€ŒåŸç‚¹0ã‹ã‚‰ã®ä½ç½®ã€ã®å·®ã‚’å–ã‚‹ã“ã¨ã§ã€ãã®é–“ã®é•·ã•ãŒæ±‚ã¾ã‚Šã¾ã™ã€‚<br>
                        ä¾‹ãˆã°ã€<span class="math-font">3 - (-2)</span> ã¯ã€ã€Œ3ã¾ã§è¡Œã£ã¦ã€ã•ã‚‰ã«åå¯¾å´ã®2åˆ†ã‚‚ã‚«ã‚¦ãƒ³ãƒˆã™ã‚‹ã€ã“ã¨ã«ãªã‚‹ã®ã§ã€çµæœçš„ã« <span class="math-font">3 + 2 = 5</span> ã¨ãªã‚Šã€ç›´æ„Ÿçš„ãªã€Œé•·ã•ã€ã¨ä¸€è‡´ã—ã¾ã™ã€‚
                    </p>
                </div>
            </div>
        </section>

        <!-- è§£èª¬ã‚»ã‚¯ã‚·ãƒ§ãƒ³2ï¼šçµ¶å¯¾å€¤ã®å°å…¥ -->
        <section class="card">
            <h2 class="text-2xl font-bold text-slate-800 mb-6 flex items-center">
                <span class="bg-slate-800 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm mr-3">2</span>
                å…¬å¼åŒ–ï¼šã©ã¡ã‚‰ãŒå¤§ãã„ã‹åˆ†ã‹ã‚‰ãªã„ã¨ãã¯ï¼Ÿ
            </h2>

            <p class="mb-4">
                ä¸€èˆ¬çš„ã«ã€2ç‚¹ <span class="math-font">A(a)</span>, <span class="math-font">B(b)</span> ã®è·é›¢ã‚’æ±‚ã‚ãŸã„ã¨ãã€
                <span class="math-font">a</span> ã¨ <span class="math-font">b</span> ã®ã©ã¡ã‚‰ãŒå¤§ãã„ã‹ï¼ˆã©ã¡ã‚‰ãŒå³ã«ã‚ã‚‹ã‹ï¼‰åˆ†ã‹ã‚‰ãªã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚
            </p>

            <div class="bubble">
                ã‚‚ã— <span class="math-font">a > b</span> ãªã®ã« <span class="math-font">b - a</span> ã‚’è¨ˆç®—ã—ã¦ã—ã¾ã†ã¨ã€ç­”ãˆãŒãƒã‚¤ãƒŠã‚¹ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚<br>
                è·é›¢ã«ãƒã‚¤ãƒŠã‚¹ã¯ã‚ã‚Šã¾ã›ã‚“ï¼ï¼ˆã€Œå­¦æ ¡ã¾ã§ã®è·é›¢ãŒ -500mã€ã¨ã¯è¨€ã„ã¾ã›ã‚“ã‚ˆã­ï¼Ÿï¼‰
            </div>

            <p class="mb-4">
                ãã“ã§ç™»å ´ã™ã‚‹ã®ãŒ<strong>çµ¶å¯¾å€¤è¨˜å· | |</strong> ã§ã™ã€‚<br>
                ã“ã‚Œã¯ã€Œä¸­èº«ãŒãƒã‚¤ãƒŠã‚¹ãªã‚‰ãƒ—ãƒ©ã‚¹ã«å¤‰ãˆã‚‹ï¼ˆç¬¦å·ã‚’ç„¡è¦–ã™ã‚‹ï¼‰ã€ã¨ã„ã†ä¾¿åˆ©ãªé“å…·ã§ã™ã€‚<br>
                ã“ã‚Œã‚’ä½¿ãˆã°ã€ã©ã£ã¡ã‹ã‚‰ã©ã£ã¡ã‚’å¼•ã„ã¦ã‚‚æ­£è§£ã«ãªã‚Šã¾ã™ã€‚
            </p>

            <div class="text-center bg-blue-50 border border-blue-200 rounded-xl p-6 my-6">
                <p class="text-sm text-blue-600 font-bold mb-2">æ•°ç›´ç·šä¸Šã®2ç‚¹ A(a), B(b) é–“ã®è·é›¢ AB</p>
                <div class="text-3xl font-bold text-slate-800 font-mono">
                    AB = | b - a |
                </div>
                <p class="text-xs text-slate-500 mt-2">â€» | a - b | ã¨æ›¸ã„ã¦ã‚‚åŒã˜ã§ã™ã€‚</p>
            </div>
        </section>

        <!-- ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ»ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ -->
        <section class="card border-2 border-indigo-100">
            <h2 class="text-xl font-bold text-indigo-700 mb-4 flex items-center">
                ğŸ® å®Ÿé¨“ã—ã¦ã¿ã‚ˆã†
            </h2>
            <p class="text-sm text-slate-600 mb-4">
                ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚’å‹•ã‹ã—ã¦2ç‚¹A, Bã‚’ç§»å‹•ã•ã›ã¦ãã ã•ã„ã€‚<br>
                <strong>ã€Œå¼•ãç®—ã®é †åºãŒå¤‰ã‚ã£ã¦ã‚‚ã€çµ¶å¯¾å€¤ã‚’ã¤ã‘ã‚Œã°çµæœã¯åŒã˜ã€</strong>ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚
            </p>

            <div class="flex flex-col md:flex-row gap-8">
                <!-- ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ -->
                <div class="w-full md:w-1/3 space-y-6">
                    <div>
                        <label class="flex justify-between font-bold text-green-700 mb-2">
                            ç‚¹ A (a)
                            <span id="val-a" class="bg-green-100 px-2 rounded">-2</span>
                        </label>
                        <input type="range" min="-5" max="5" value="-2" step="1" id="input-a" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-green-600" oninput="updateSimulator()">
                    </div>

                    <div>
                        <label class="flex justify-between font-bold text-red-700 mb-2">
                            ç‚¹ B (b)
                            <span id="val-b" class="bg-red-100 px-2 rounded">3</span>
                        </label>
                        <input type="range" min="-5" max="5" value="3" step="1" id="input-b" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-red-600" oninput="updateSimulator()">
                    </div>

                    <div class="bg-slate-800 text-white p-4 rounded-lg text-sm font-mono space-y-2">
                        <p class="border-b border-slate-600 pb-1 mb-1 text-xs text-slate-400">è¨ˆç®—ãƒ—ãƒ­ã‚»ã‚¹</p>
                        
                        <!-- å¼1: b - a -->
                        <div class="flex justify-between items-center">
                            <span>b - a = </span>
                            <span><span id="calc-b">3</span> - (<span id="calc-a">-2</span>) = <span id="res-ba" class="text-yellow-400">5</span></span>
                        </div>
                        
                        <!-- å¼2: a - b -->
                        <div class="flex justify-between items-center text-slate-400">
                            <span>a - b = </span>
                            <span><span id="calc-a2">-2</span> - (<span id="calc-b2">3</span>) = <span id="res-ab">-5</span></span>
                        </div>

                        <!-- çµè«– -->
                        <div class="pt-2 mt-2 border-t border-slate-600 text-center">
                            <span class="text-xs text-slate-300">çµ¶å¯¾å€¤ã‚’ã¨ã‚‹ã¨...</span><br>
                            <span class="text-xl font-bold text-yellow-400">è·é›¢ = <span id="final-dist">5</span></span>
                        </div>
                    </div>
                </div>

                <!-- ã‚­ãƒ£ãƒ³ãƒã‚¹ -->
                <div class="w-full md:w-2/3 flex justify-center items-center bg-white rounded-xl border border-slate-200 p-2">
                    <canvas id="mainCanvas" width="400" height="250"></canvas>
                </div>
            </div>
        </section>

        <!-- ç·´ç¿’å•é¡Œ -->
        <section class="card bg-yellow-50 border-yellow-200">
            <h2 class="text-lg font-bold text-yellow-800 mb-4 flex items-center">
                âœï¸ ç†è§£åº¦ãƒã‚§ãƒƒã‚¯
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- å•1 -->
                <div class="bg-white p-4 rounded-lg shadow-sm">
                    <p class="font-bold text-slate-700 mb-2">å•1</p>
                    <p class="mb-3 text-sm">2ç‚¹ A(2), B(8) é–“ã®è·é›¢ã¯ï¼Ÿ</p>
                    <div class="flex gap-2">
                        <input type="text" id="q1" class="border rounded p-1 w-20 text-center" placeholder="ç­”ãˆ">
                        <button onclick="checkAnswer(1, 6)" class="bg-yellow-500 text-white px-3 py-1 rounded text-sm hover:bg-yellow-600">åˆ¤å®š</button>
                    </div>
                    <p id="msg-1" class="text-xs mt-2 font-bold h-4"></p>
                </div>

                <!-- å•2 -->
                <div class="bg-white p-4 rounded-lg shadow-sm">
                    <p class="font-bold text-slate-700 mb-2">å•2</p>
                    <p class="mb-3 text-sm">2ç‚¹ C(-3), D(4) é–“ã®è·é›¢ã¯ï¼Ÿ</p>
                    <div class="flex gap-2">
                        <input type="text" id="q2" class="border rounded p-1 w-20 text-center" placeholder="ç­”ãˆ">
                        <button onclick="checkAnswer(2, 7)" class="bg-yellow-500 text-white px-3 py-1 rounded text-sm hover:bg-yellow-600">åˆ¤å®š</button>
                    </div>
                    <p id="msg-2" class="text-xs mt-2 font-bold h-4"></p>
                </div>

                <!-- å•3 -->
                <div class="bg-white p-4 rounded-lg shadow-sm md:col-span-2">
                    <p class="font-bold text-slate-700 mb-2">å•3 (å¿œç”¨)</p>
                    <p class="mb-3 text-sm">2ç‚¹ P(-5), Q(-1) é–“ã®è·é›¢ã¯ï¼Ÿ <span class="text-slate-400 text-xs">ï¼ˆãƒ’ãƒ³ãƒˆï¼šå¤§ãã„æ–¹ã¯ã©ã£ã¡ï¼Ÿï¼‰</span></p>
                    <div class="flex gap-2">
                        <input type="text" id="q3" class="border rounded p-1 w-20 text-center" placeholder="ç­”ãˆ">
                        <button onclick="checkAnswer(3, 4)" class="bg-yellow-500 text-white px-3 py-1 rounded text-sm hover:bg-yellow-600">åˆ¤å®š</button>
                    </div>
                    <p id="msg-3" class="text-xs mt-2 font-bold h-4"></p>
                </div>
            </div>
        </section>

    </main>

    <footer class="text-center text-slate-400 text-xs py-8">
        æ•°II æ•°ç›´ç·šä¸Šã®è·é›¢ | å­¦ç¿’ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
    </footer>

    <script>
        const canvas = document.getElementById('mainCanvas');
        const ctx = canvas.getContext('2d');
        const GRID = 35; // 1ç›®ç››ã‚Šã®å¹…
        
        let a = -2;
        let b = 3;

        function updateSimulator() {
            a = parseInt(document.getElementById('input-a').value);
            b = parseInt(document.getElementById('input-b').value);

            // æ•°å€¤è¡¨ç¤ºã®æ›´æ–°
            document.getElementById('val-a').innerText = a;
            document.getElementById('val-b').innerText = b;

            document.getElementById('calc-a').innerText = a < 0 ? `(${a})` : a;
            document.getElementById('calc-b').innerText = b;
            document.getElementById('res-ba').innerText = b - a;

            document.getElementById('calc-a2').innerText = a;
            document.getElementById('calc-b2').innerText = b < 0 ? `(${b})` : b;
            document.getElementById('res-ab').innerText = a - b;

            document.getElementById('final-dist').innerText = Math.abs(b - a);

            draw();
        }

        function draw() {
            const w = canvas.width;
            const h = canvas.height;
            const centerY = h * 0.6;
            const centerX = w / 2;

            ctx.clearRect(0, 0, w, h);

            // 1. æ•°ç›´ç·šã®æç”»
            ctx.strokeStyle = '#94a3b8';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(10, centerY);
            ctx.lineTo(w - 10, centerY);
            ctx.stroke();

            // 2. ç›®ç››ã‚Šã®æç”» (-5 ~ 5)
            ctx.font = '12px sans-serif';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'top';

            for (let i = -5; i <= 5; i++) {
                const x = centerX + i * GRID;
                
                // ç›®ç››ã‚Šç·š
                ctx.beginPath();
                ctx.moveTo(x, centerY - 5);
                ctx.lineTo(x, centerY + 5);
                ctx.strokeStyle = (i === 0) ? '#334155' : '#cbd5e1'; // 0ã ã‘æ¿ƒã
                ctx.lineWidth = (i === 0) ? 2 : 1;
                ctx.stroke();

                // æ•°å­—
                ctx.fillStyle = '#64748b';
                ctx.fillText(i, x, centerY + 10);
            }

            // 3. åº§æ¨™ã‹ã‚‰ã‚­ãƒ£ãƒ³ãƒã‚¹ä¸Šã®Xåº§æ¨™ã‚’è¨ˆç®—ã™ã‚‹é–¢æ•°
            const getX = (val) => centerX + val * GRID;

            const ax = getX(a);
            const bx = getX(b);
            const dist = Math.abs(b - a);

            // 4. è·é›¢ã‚’ç¤ºã™ã‚¢ãƒ¼ãƒã¨ãƒ©ãƒ™ãƒ«
            if (dist > 0) {
                const midX = (ax + bx) / 2;
                const arcHeight = 40;
                const topY = centerY - arcHeight;

                // ç¯„å›²ãƒ©ã‚¤ãƒ³
                ctx.beginPath();
                ctx.moveTo(ax, centerY - 10);
                ctx.lineTo(ax, topY);
                ctx.lineTo(bx, topY);
                ctx.lineTo(bx, centerY - 10);
                ctx.strokeStyle = '#eab308'; // yellow-500
                ctx.lineWidth = 2;
                ctx.setLineDash([4, 4]);
                ctx.stroke();
                ctx.setLineDash([]);

                // è·é›¢ãƒ©ãƒ™ãƒ«èƒŒæ™¯
                ctx.fillStyle = '#fefce8';
                ctx.fillRect(midX - 30, topY - 15, 60, 30);
                
                // è·é›¢ãƒ©ãƒ™ãƒ«æ–‡å­—
                ctx.fillStyle = '#854d0e'; // yellow-800
                ctx.font = 'bold 16px sans-serif';
                ctx.textBaseline = 'middle';
                ctx.fillText(`è·é›¢: ${dist}`, midX, topY);
                
                // å·®ã®èª¬æ˜ï¼ˆã©ã£ã¡ã‹ã‚‰ã©ã£ã¡ã‚’å¼•ã„ãŸã‹ï¼‰
                ctx.font = '10px sans-serif';
                ctx.fillStyle = '#ca8a04';
                const subText = (b >= a) ? `${b} - (${a})` : `${a} - (${b})`;
                ctx.fillText(subText, midX, topY + 15);
            } else {
                // é‡ãªã£ã¦ã„ã‚‹å ´åˆ
                ctx.fillStyle = '#854d0e';
                ctx.font = 'bold 14px sans-serif';
                ctx.fillText("è·é›¢: 0", ax, centerY - 40);
            }

            // 5. ç‚¹Aã®æç”»
            ctx.fillStyle = '#16a34a'; // green
            ctx.beginPath();
            ctx.arc(ax, centerY, 6, 0, Math.PI * 2);
            ctx.fill();
            // ãƒ©ãƒ™ãƒ«A
            ctx.fillStyle = '#14532d';
            ctx.font = 'bold 14px sans-serif';
            ctx.fillText('A', ax, centerY - 20);

            // 6. ç‚¹Bã®æç”»
            ctx.fillStyle = '#dc2626'; // red
            ctx.beginPath();
            ctx.arc(bx, centerY, 6, 0, Math.PI * 2);
            ctx.fill();
            // ãƒ©ãƒ™ãƒ«B
            ctx.fillStyle = '#7f1d1d';
            ctx.fillText('B', bx, centerY - 20);
        }

        function checkAnswer(qId, correctVal) {
            const input = document.getElementById(`q${qId}`).value;
            const msg = document.getElementById(`msg-${qId}`);
            
            if (parseInt(input) === correctVal) {
                msg.innerText = "â­• æ­£è§£ï¼";
                msg.className = "text-xs mt-2 font-bold h-4 text-green-600";
            } else {
                msg.innerText = "âŒ æƒœã—ã„ï¼";
                msg.className = "text-xs mt-2 font-bold h-4 text-red-500";
            }
        }

        // åˆæœŸæç”»
        window.onload = updateSimulator;

    </script>
</body>
</html>
