<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2æ¬¡é–¢æ•°ã®å¹³è¡Œç§»å‹•ï¼ˆæ¨ªï¼‰</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Roboto+Mono:wght@500&display=swap');
        
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f8fafc;
            color: #1e293b;
            line-height: 1.6;
        }
        .math-font {
            font-family: 'Roboto Mono', monospace;
            font-feature-settings: "cv01";
        }
        .card {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }
        canvas {
            background-color: #fff;
            border-radius: 8px;
            border: 1px solid #cbd5e1;
        }
        input[type=range] {
            accent-color: #0ea5e9; /* Sky-500 */
        }
        /* å…¥åŠ›æ¬„ */
        .calc-input {
            border: 1px solid #94a3b8;
            border-radius: 6px;
            padding: 4px 8px;
            width: 70px;
            text-align: center;
            font-family: 'Roboto Mono', monospace;
            font-weight: 500;
            outline: none;
            transition: all 0.2s;
        }
        .calc-input:focus {
            border-color: #0ea5e9;
            box-shadow: 0 0 0 2px rgba(14, 165, 233, 0.1);
        }
        .correct {
            border-color: #16a34a !important;
            background-color: #f0fdf4 !important;
            color: #15803d;
        }
        .wrong {
            border-color: #ef4444 !important;
            background-color: #fef2f2 !important;
        }
        .section-header {
            border-bottom: 1px solid #e2e8f0;
            padding: 1rem 1.5rem;
            background-color: #f8fafc;
            border-top-left-radius: 12px;
            border-top-right-radius: 12px;
        }
        .section-title {
            font-weight: 700;
            color: #334155;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        .step-number {
            background-color: #0ea5e9;
            color: white;
            font-size: 0.75rem;
            font-weight: 700;
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Roboto Mono', monospace;
        }
    </style>
</head>
<body class="pb-20 text-slate-700">

    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header class="bg-white border-b border-slate-200 sticky top-0 z-20">
        <div class="max-w-4xl mx-auto px-4 py-4 flex items-center justify-between">
            <div>
                <h1 class="text-lg font-bold text-slate-800">æ•°å­¦Iï¼š2æ¬¡é–¢æ•°</h1>
                <p class="text-xs text-slate-500">å·¦å³ã®å¹³è¡Œç§»å‹•ãƒ»ã‚«ãƒƒã‚³ã®ã‚ã‚‹å¼</p>
            </div>
            <div class="text-slate-400 text-sm font-medium">åŸºæœ¬ç·¨</div>
        </div>
    </header>

    <main class="max-w-4xl mx-auto p-4 space-y-6">

        <!-- 0. å°å…¥æ¯”è¼ƒ -->
        <section class="card">
            <div class="section-header">
                <h2 class="section-title">
                    <span class="step-number">Start</span>
                    ä»Šå›ã®ãƒ†ãƒ¼ãƒ
                </h2>
            </div>
            <div class="p-6">
                <p class="mb-6 text-sm">
                    å‰å›ã¯ã€Œä¸Šä¸‹ã€ã®ç§»å‹•ã§ã—ãŸã€‚ä»Šå›ã¯<strong>ã€Œå·¦å³ã€</strong>ã®ç§»å‹•ã§ã™ã€‚<br>
                    x ãŒ<strong>ã‚«ãƒƒã‚³ <span class="math-font">( )</span> </strong>ã«å…¥ã£ã¦ã„ã‚‹ã®ãŒç‰¹å¾´ã§ã™ã€‚
                </p>
                <div class="grid md:grid-cols-2 gap-6 items-center">
                    <!-- åŸºæœ¬å½¢ -->
                    <div class="bg-slate-50 p-5 rounded-xl border border-slate-200 text-center relative">
                        <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-slate-200 text-slate-600 text-[10px] font-bold px-2 py-0.5 rounded-full">
                            ã“ã‚Œã¾ã§ã®åŸºæœ¬
                        </div>
                        <p class="math-font text-2xl font-bold text-slate-700 mb-3 mt-2">y = axÂ²</p>
                        <div class="text-xs text-slate-500 bg-white inline-block px-3 py-1 rounded border border-slate-100">
                            é ‚ç‚¹ <span class="math-font font-bold">(0, 0)</span>
                        </div>
                    </div>
                    
                    <!-- ä»Šå›ã®å½¢ -->
                    <div class="bg-sky-50 p-5 rounded-xl border border-sky-200 text-center relative shadow-sm">
                        <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-sky-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full shadow-sm">
                            NEW
                        </div>
                        <p class="text-xs text-sky-600 mb-2 font-bold mt-1">x ãŒã‚«ãƒƒã‚³ã®ä¸­ã¸ï¼</p>
                        <p class="math-font text-2xl font-bold text-sky-800 mb-3">
                            y = a<span class="bg-sky-200 px-1 rounded ring-2 ring-sky-100">(x - p)</span>Â²
                        </p>
                        <div class="text-xs text-sky-700 bg-white/80 inline-block px-3 py-1 rounded border border-sky-100">
                            é ‚ç‚¹ <span class="math-font font-bold">(p, 0)</span>
                        </div>
                    </div>
                </div>
                <p class="mt-4 text-xs text-slate-500 text-center bg-yellow-50 p-2 rounded border border-yellow-100">
                    âš ï¸ ç¬¦å·ï¼ˆãƒ—ãƒ©ã‚¹ãƒ»ãƒã‚¤ãƒŠã‚¹ï¼‰ã®å¼•ã£ã‹ã‘ã«æ³¨æ„ãŒå¿…è¦ã§ã™ï¼
                </p>
            </div>
        </section>

        <!-- 1. ç‚¹ã®æ¨ªç§»å‹• -->
        <section class="card">
            <div class="section-header">
                <h2 class="section-title">
                    <span class="step-number">01</span>
                    ç‚¹ã®æ¨ªç§»å‹•
                </h2>
            </div>
            <div class="p-6">
                <p class="mb-4 text-sm">
                    ã¾ãšã¯ç‚¹ã‚’æ¨ªã«å‹•ã‹ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚<br>
                    xåº§æ¨™ã®å€¤ãŒå¤‰ã‚ã‚‹ã¨ã€ç‚¹ã¯å·¦å³ã«ç§»å‹•ã—ã¾ã™ã€‚è¦‹ã‚„ã™ã„ã‚ˆã†ã«å°‘ã—æµ®ã‹ã›ã¦ç¢ºèªã—ã¾ã™ã€‚
                </p>

                <div class="flex flex-col md:flex-row gap-8 items-center justify-center bg-slate-50 p-6 rounded-lg border border-slate-200">
                    <!-- ç‚¹ç§»å‹•ã®ã‚°ãƒ©ãƒ• -->
                    <div class="flex flex-col items-center gap-2">
                        <canvas id="pointMoveCanvas" width="280" height="280" class="shadow-sm bg-white"></canvas>
                        <p class="text-xs text-slate-400">ã‚°ãƒ©ãƒ•ä¸Šã®ç‚¹ã®ç§»å‹•</p>
                    </div>

                    <!-- è§£èª¬ -->
                    <div class="space-y-4 max-w-sm">
                        <div class="flex items-center gap-4 bg-white p-3 rounded shadow-sm border border-slate-100">
                            <div class="w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center font-bold text-slate-500">A</div>
                            <div class="text-sm">
                                <span class="block text-xs text-slate-400">å…ƒã®ç‚¹</span>
                                <span class="math-font font-bold text-lg">(0, 2)</span>
                            </div>
                        </div>
                        
                        <div class="flex items-center gap-2 text-slate-500 font-bold pl-2">
                            <span class="text-2xl">â†“</span>
                            <span class="text-sm bg-sky-100 text-sky-700 px-2 py-1 rounded">+3 å¹³è¡Œç§»å‹•</span>
                        </div>

                        <div class="flex items-center gap-4 bg-white p-3 rounded shadow-sm border border-sky-100 ring-2 ring-sky-50">
                            <div class="w-8 h-8 rounded-full bg-sky-100 flex items-center justify-center font-bold text-sky-600">A'</div>
                            <div class="text-sm">
                                <span class="block text-xs text-slate-400">ç§»å‹•å¾Œã®ç‚¹</span>
                                <span class="math-font font-bold text-lg text-sky-700">(3, 2)</span>
                            </div>
                        </div>

                        <div class="text-sm bg-white p-4 rounded border border-slate-200 mt-4">
                            <h3 class="font-bold text-slate-700 mb-2">ãƒã‚¤ãƒ³ãƒˆ</h3>
                            <ul class="list-disc pl-5 space-y-1 text-slate-600">
                                <li>yåº§æ¨™ï¼ˆé«˜ã•ï¼‰ã¯å¤‰ã‚ã‚‰ãªã„ã€‚</li>
                                <li>xåº§æ¨™ï¼ˆæ¨ªã®ä½ç½®ï¼‰ã ã‘ãŒå¤‰ã‚ã‚‹ã€‚</li>
                                <li>ã€Œ<span class="font-bold text-sky-600">xè»¸æ–¹å‘ã« +3 å¹³è¡Œç§»å‹•ã—ãŸ</span>ã€ã¨è¨€ã„ã¾ã™ã€‚</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 2. ã‚°ãƒ©ãƒ•ã®å¹³è¡Œç§»å‹•ï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼‰ -->
        <section class="card">
            <div class="section-header">
                <h2 class="section-title">
                    <span class="step-number">02</span>
                    ã‚°ãƒ©ãƒ•ã®å¹³è¡Œç§»å‹•
                </h2>
            </div>
            <div class="p-6">
                <p class="mb-4 text-sm">
                    ã“ã“ãŒä¸€ç•ªã®é‡è¦ãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚<br>
                    ä¸‹ã®ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚’å‹•ã‹ã—ã¦ã€<strong>ã€Œå¼ã®ã‚«ãƒƒã‚³ã®ä¸­èº«ã€ã¨ã€Œç§»å‹•ã™ã‚‹æ–¹å‘ã€ã®é–¢ä¿‚</strong>ã‚’ã‚ˆãè¦‹ã¦ãã ã•ã„ã€‚
                </p>
                
                <div class="flex flex-col md:flex-row gap-8 items-start justify-center">
                    <!-- ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ -->
                    <div class="flex flex-col items-center space-y-4 bg-slate-50 p-4 rounded-lg border border-slate-200 mx-auto md:mx-0">
                        <canvas id="graphCanvas" width="300" height="300" class="w-[280px] h-[280px] md:w-[300px] md:h-[300px]"></canvas>
                        
                        <div class="w-full max-w-[280px] space-y-3">
                            <div class="flex justify-between items-center text-sm">
                                <span class="font-bold text-slate-600">p ã®å€¤ (å·¦å³ç§»å‹•)</span>
                                <span id="displayP" class="math-font text-lg font-bold text-sky-700">0</span>
                            </div>
                            <input type="range" id="pValue" min="-4" max="4" step="1" value="0" class="w-full h-1.5 bg-slate-300 rounded-lg appearance-none cursor-pointer">
                            
                            <div class="text-center bg-white p-3 rounded border border-slate-200 text-sm math-font shadow-sm">
                                å¼ï¼š <span class="font-bold text-lg">y = <span id="equationFull" class="text-sky-600">xÂ²</span></span>
                            </div>
                        </div>
                    </div>

                    <!-- è§£èª¬ -->
                    <div class="flex-1 space-y-4 text-sm max-w-sm">
                        <div class="bg-yellow-50 p-4 rounded border border-yellow-200 text-slate-700">
                            <h3 class="font-bold text-yellow-800 mb-2 flex items-center gap-2">
                                <span>âš¡</span> ã“ã“ã«æ³¨æ„ï¼
                            </h3>
                            <p class="mb-2">
                                å³ï¼ˆãƒ—ãƒ©ã‚¹æ–¹å‘ï¼‰ã« <span class="font-bold">3</span> å‹•ã„ãŸã¨ãã€å¼ã¯ <span class="math-font font-bold text-sky-700">y = (x - 3)Â²</span> ã«ãªã‚Šã¾ã—ãŸã­ï¼Ÿ
                            </p>
                            <p class="font-bold border-b-2 border-yellow-400 inline-block mb-1">ç¬¦å·ãŒé€†ã«è¦‹ãˆã¾ã›ã‚“ã‹ï¼Ÿ</p>
                            <p class="text-xs text-slate-600 mt-1">
                                ç§»å‹•é‡ <span class="math-font">+3</span> ãªã®ã«ã€å¼ã®ä¸­ã¯ <span class="math-font">-3</span>ã€‚<br>
                                ç§»å‹•é‡ <span class="math-font">-3</span> ãªã‚‰ã€å¼ã®ä¸­ã¯ <span class="math-font">+3</span>ã€‚
                            </p>
                        </div>

                        <div class="bg-white p-4 rounded border border-slate-200">
                            <h3 class="font-bold text-slate-800 mb-1">è¦šãˆæ–¹ã®ã‚³ãƒ„</h3>
                            <p class="text-slate-600 mb-2">
                                ã€Œã‚«ãƒƒã‚³ã®ä¸­ã‚’ <span class="font-bold text-red-500">0</span> ã«ã™ã‚‹æ•°å­—ã€ãŒé ‚ç‚¹ã ã¨è¦šãˆã¾ã—ã‚‡ã†ã€‚
                            </p>
                            <ul class="space-y-2 text-xs text-slate-500 math-font">
                                <li class="flex items-center gap-2">
                                    <span class="bg-slate-100 px-2 py-1 rounded">(x - 3)Â²</span>
                                    <span>â†’ x=3 ã§ã‚¼ãƒ­ â†’ é ‚ç‚¹ 3</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <span class="bg-slate-100 px-2 py-1 rounded">(x + 2)Â²</span>
                                    <span>â†’ x=-2 ã§ã‚¼ãƒ­ â†’ é ‚ç‚¹ -2</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 3. ä¾‹é¡Œè§£èª¬ -->
        <section class="card">
            <div class="section-header">
                <h2 class="section-title">
                    <span class="step-number">03</span>
                    é ‚ç‚¹ã¨è»¸ã®ç™ºè¦‹
                </h2>
            </div>
            <div class="p-6">
                <p class="mb-4 text-sm">
                    å·¦å³ã«å‹•ãã¨ã€é ‚ç‚¹ã ã‘ã§ãªãã€Œè»¸ï¼ˆã˜ãï¼‰ã€ã‚‚ä¸€ç·’ã«ç§»å‹•ã—ã¾ã™ã€‚<br>
                    è»¸ã¯ã€æ”¾ç‰©ç·šã®çœŸã‚“ä¸­ã‚’é€šã‚‹ç·šã®ã“ã¨ã§ã™ã€‚
                </p>

                <!-- ä¾‹é¡Œãƒ–ãƒ­ãƒƒã‚¯ -->
                <div class="bg-slate-50 border border-slate-200 rounded-lg p-5 mb-6">
                    <div class="flex items-center gap-2 mb-3">
                        <span class="bg-slate-600 text-white text-[10px] px-2 py-0.5 rounded font-bold">ä¾‹é¡Œ</span>
                        <span class="text-sm font-bold text-slate-700">æ¬¡ã®2æ¬¡é–¢æ•°ã®ã‚°ãƒ©ãƒ•ã«ã¤ã„ã¦ç­”ãˆãªã•ã„ã€‚</span>
                    </div>
                    
                    <div class="text-center py-4 bg-white rounded border border-slate-100 mb-4">
                        <span class="math-font text-2xl font-bold text-slate-800">y = 2(x <span class="text-red-500">- 3</span>)Â²</span>
                    </div>

                    <div class="space-y-4 text-sm text-slate-600">
                        <div>
                            <p class="font-bold text-slate-800 mb-1">â‘  é ‚ç‚¹ã®åº§æ¨™ã¯ï¼Ÿ</p>
                            <p class="pl-4 border-l-2 border-sky-200">
                                ã‚«ãƒƒã‚³ã®ä¸­ã‚’0ã«ã™ã‚‹ x ã¯ <span class="math-font font-bold text-sky-700">3</span> ã§ã™ã€‚<br>
                                ä¸Šä¸‹ã«ã¯å‹•ã„ã¦ã„ãªã„ã®ã§ yåº§æ¨™ã¯ 0ã€‚<br>
                                ç­”ãˆï¼š <span class="math-font font-bold text-sky-700">(3, 0)</span>
                            </p>
                        </div>
                        <div>
                            <p class="font-bold text-slate-800 mb-1">â‘¡ è»¸ï¼ˆã˜ãï¼‰ã®æ–¹ç¨‹å¼ã¯ï¼Ÿ</p>
                            <p class="pl-4 border-l-2 border-sky-200">
                                é ‚ç‚¹ã® xåº§æ¨™ã¨åŒã˜ã§ã™ã€‚<br>
                                ç­”ãˆï¼š <span class="math-font font-bold">x = 3</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 4. ç·´ç¿’å•é¡Œ -->
        <section class="card">
            <div class="section-header">
                <h2 class="section-title">
                    <span class="step-number">04</span>
                    ç·´ç¿’å•é¡Œ
                </h2>
            </div>
            <div class="p-6">
                <p class="mb-4 text-sm">
                    ç¬¦å·ã«æ°—ã‚’ã¤ã‘ã¦è§£ã„ã¦ã¿ã¾ã—ã‚‡ã†ã€‚<br>
                    ãƒã‚¤ãƒŠã‚¹ã®ã¨ãã¯ãƒ—ãƒ©ã‚¹ã€ãƒ—ãƒ©ã‚¹ã®ã¨ãã¯ãƒã‚¤ãƒŠã‚¹ã§ã™ã‚ˆï¼
                </p>

                <div class="bg-white border border-slate-200 p-5 rounded-lg shadow-sm space-y-8">
                    
                    <!-- å•1 -->
                    <div>
                        <div class="flex items-center gap-2 mb-3">
                            <span class="bg-sky-600 text-white text-xs px-2 py-1 rounded font-bold">å•1</span>
                            <span class="text-sm font-bold">ã‚°ãƒ©ãƒ•ã®é ‚ç‚¹ã‚’ç­”ãˆãªã•ã„</span>
                        </div>
                        <div class="grid md:grid-cols-2 gap-4">
                            <!-- å•1-1 -->
                            <div class="bg-slate-50 p-3 rounded border border-slate-100">
                                <p class="math-font text-lg text-center mb-2">y = (x - 4)Â²</p>
                                <div class="flex justify-center items-center gap-2 text-sm">
                                    <span>é ‚ç‚¹ï¼š</span>
                                    <span class="math-font">( </span>
                                    <input type="number" id="q1" class="calc-input w-16">
                                    <span class="math-font"> , 0 )</span>
                                    <span id="res1" class="text-lg w-6"></span>
                                </div>
                            </div>
                            <!-- å•1-2 -->
                            <div class="bg-slate-50 p-3 rounded border border-slate-100">
                                <p class="math-font text-lg text-center mb-2">y = 3(x + 2)Â²</p>
                                <div class="flex justify-center items-center gap-2 text-sm">
                                    <span>é ‚ç‚¹ï¼š</span>
                                    <span class="math-font">( </span>
                                    <input type="number" id="q2" class="calc-input w-16">
                                    <span class="math-font"> , 0 )</span>
                                    <span id="res2" class="text-lg w-6"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- å•2 -->
                    <div>
                        <div class="flex items-center gap-2 mb-3">
                            <span class="bg-sky-600 text-white text-xs px-2 py-1 rounded font-bold">å•2</span>
                            <span class="text-sm font-bold">å¼ã®æ±ºå®š</span>
                        </div>
                        <p class="text-sm text-slate-600 mb-3">
                            <span class="math-font">y = 2xÂ²</span> ã®ã‚°ãƒ©ãƒ•ã‚’ã€xè»¸æ–¹å‘ã« <span class="font-bold">+1</span> ã ã‘å¹³è¡Œç§»å‹•ã—ãŸã‚°ãƒ©ãƒ•ã®å¼ã¯ï¼Ÿ
                        </p>
                        <div class="flex justify-center items-center gap-2 bg-slate-50 p-4 rounded border border-slate-100">
                            <span class="math-font font-bold text-lg">y = 2(x</span>
                            <input type="text" id="q3" class="calc-input w-20" placeholder="+?">
                            <span class="math-font font-bold text-lg">)Â²</span>
                            <span id="res3" class="text-lg w-6"></span>
                        </div>
                        <p class="text-xs text-slate-400 mt-2 text-center">â€» ç¬¦å·ï¼ˆ+ ã‚„ -ï¼‰ã¨æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</p>
                    </div>

                    <!-- åˆ¤å®šãƒœã‚¿ãƒ³ -->
                    <div class="flex flex-col items-center">
                        <button onclick="checkAnswers()" class="bg-sky-600 hover:bg-sky-700 text-white font-bold py-2 px-8 rounded text-sm transition shadow-sm w-full md:w-auto">
                            ç­”ãˆåˆã‚ã›
                        </button>
                        <p id="feedback" class="mt-3 text-sm font-bold h-5"></p>
                    </div>

                    <!-- ã‚°ãƒ©ãƒ•ã§ã®ç¢ºèªã‚¨ãƒªã‚¢ (åˆæœŸã¯éè¡¨ç¤º) -->
                    <div id="practiceGraphArea" class="hidden mt-6 border-t border-slate-100 pt-6">
                        <h3 class="text-sm font-bold text-slate-700 mb-4 text-center">ğŸ“Š ã‚°ãƒ©ãƒ•ã§ç¢ºèª</h3>
                        <div class="grid md:grid-cols-2 gap-6">
                            <!-- å•1ã®ã‚°ãƒ©ãƒ• -->
                            <div class="flex flex-col items-center">
                                <p class="text-xs font-bold text-slate-500 mb-2">å•1ã®ã‚°ãƒ©ãƒ•</p>
                                <canvas id="practiceCanvas1" width="260" height="260" class="bg-slate-50 border border-slate-200"></canvas>
                                <div class="text-xs mt-2 space-y-1">
                                    <div class="flex items-center gap-2">
                                        <span class="inline-block w-3 h-3 bg-sky-600 rounded-full"></span>
                                        <span class="text-sky-700 font-bold math-font">y = (x - 4)Â²</span>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <span class="inline-block w-3 h-3 bg-indigo-600 rounded-full"></span>
                                        <span class="text-indigo-700 font-bold math-font">y = 3(x + 2)Â²</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- å•2ã®ã‚°ãƒ©ãƒ• -->
                            <div class="flex flex-col items-center">
                                <p class="text-xs font-bold text-slate-500 mb-2">å•2ã®ã‚°ãƒ©ãƒ•</p>
                                <canvas id="practiceCanvas2" width="260" height="260" class="bg-slate-50 border border-slate-200"></canvas>
                                <div class="text-xs mt-2 space-y-1">
                                    <div class="flex items-center gap-2">
                                        <span class="inline-block w-3 h-1 bg-slate-400 border-t border-b border-slate-400"></span>
                                        <span class="text-slate-500 font-bold math-font">y = 2xÂ²</span>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <span class="inline-block w-3 h-3 bg-rose-600 rounded-full"></span>
                                        <span class="text-rose-700 font-bold math-font">y = 2(x - 1)Â²</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </section>

    </main>

    <script>
        /* --- å…±é€š: ã‚°ãƒ©ãƒ•æç”»ã‚¯ãƒ©ã‚¹ --- */
        class GraphDrawer {
            constructor(canvasId, scale = 20, originYRatio = 0.5) {
                this.canvas = document.getElementById(canvasId);
                this.ctx = this.canvas.getContext('2d');
                this.scale = scale;
                this.cx = this.canvas.width / 2;
                this.cy = this.canvas.height * originYRatio;
                this.init();
            }

            init() {
                this.clear();
                this.drawGrid();
                this.drawAxes();
            }

            clear() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
            }

            drawGrid() {
                this.ctx.strokeStyle = '#f1f5f9';
                this.ctx.lineWidth = 1;
                this.ctx.beginPath();
                const w = this.canvas.width;
                const h = this.canvas.height;
                
                for(let x = this.cx; x < w; x += this.scale) { this.ctx.moveTo(x, 0); this.ctx.lineTo(x, h); }
                for(let x = this.cx; x > 0; x -= this.scale) { this.ctx.moveTo(x, 0); this.ctx.lineTo(x, h); }
                for(let y = this.cy; y < h; y += this.scale) { this.ctx.moveTo(0, y); this.ctx.lineTo(w, y); }
                for(let y = this.cy; y > 0; y -= this.scale) { this.ctx.moveTo(0, y); this.ctx.lineTo(w, y); }
                this.ctx.stroke();
            }

            drawAxes() {
                const w = this.canvas.width;
                const h = this.canvas.height;
                this.ctx.strokeStyle = '#94a3b8';
                this.ctx.lineWidth = 1.5;
                this.ctx.beginPath();
                this.ctx.moveTo(0, this.cy); this.ctx.lineTo(w, this.cy);
                this.ctx.moveTo(this.cx, 0); this.ctx.lineTo(this.cx, h);
                this.ctx.stroke();

                this.ctx.fillStyle = '#64748b';
                this.ctx.font = '11px Roboto Mono';
                this.ctx.textAlign = 'center';
                this.ctx.textBaseline = 'top';

                const xSteps = Math.floor(w / 2 / this.scale);
                for (let i = -xSteps; i <= xSteps; i++) {
                    if (i === 0) continue;
                    let px = this.cx + i * this.scale;
                    if (px > 0 && px < w) {
                        this.ctx.beginPath(); this.ctx.moveTo(px, this.cy - 3); this.ctx.lineTo(px, this.cy + 3); this.ctx.stroke();
                        if (i % 2 === 0 || Math.abs(i) <= 5) this.ctx.fillText(i, px, this.cy + 6);
                    }
                }

                this.ctx.textAlign = 'right';
                this.ctx.textBaseline = 'middle';
                const yStepsTop = Math.floor(this.cy / this.scale);
                const yStepsBottom = Math.floor((h - this.cy) / this.scale);
                
                for (let i = -yStepsBottom; i <= yStepsTop; i++) {
                    if (i === 0) continue;
                    let py = this.cy - i * this.scale;
                    if (py > 0 && py < h) {
                        this.ctx.beginPath(); this.ctx.moveTo(this.cx - 3, py); this.ctx.lineTo(this.cx + 3, py); this.ctx.stroke();
                        if (Math.abs(i) % 2 === 0) this.ctx.fillText(i, this.cx - 6, py);
                    }
                }
                
                this.ctx.fillText('O', this.cx - 6, this.cy + 6);
            }

            drawPoint(x, y, label = "", color = '#64748b') {
                const px = this.cx + x * this.scale;
                const py = this.cy - y * this.scale;

                this.ctx.fillStyle = color;
                this.ctx.beginPath();
                this.ctx.arc(px, py, 4, 0, Math.PI * 2);
                this.ctx.fill();

                if (label) {
                    this.ctx.fillStyle = color;
                    this.ctx.font = 'bold 12px Roboto Mono';
                    this.ctx.textAlign = 'left';
                    this.ctx.fillText(label, px + 8, py);
                }
            }

            drawArrow(x1, y1, x2, y2, color = '#059669') {
                const px1 = this.cx + x1 * this.scale;
                const py1 = this.cy - y1 * this.scale;
                const px2 = this.cx + x2 * this.scale;
                const py2 = this.cy - y2 * this.scale;

                this.ctx.strokeStyle = color;
                this.ctx.fillStyle = color;
                this.ctx.lineWidth = 2;

                this.ctx.beginPath();
                this.ctx.setLineDash([4, 4]);
                this.ctx.moveTo(px1, py1);
                this.ctx.lineTo(px2, py2);
                this.ctx.stroke();
                this.ctx.setLineDash([]);

                const headLen = 8;
                const angle = Math.atan2(py2 - py1, px2 - px1);
                this.ctx.beginPath();
                this.ctx.moveTo(px2, py2);
                this.ctx.lineTo(px2 - headLen * Math.cos(angle - Math.PI / 6), py2 - headLen * Math.sin(angle - Math.PI / 6));
                this.ctx.lineTo(px2 - headLen * Math.cos(angle + Math.PI / 6), py2 - headLen * Math.sin(angle + Math.PI / 6));
                this.ctx.closePath();
                this.ctx.fill();
            }

            drawVertexLabel(x, y, text, color = '#64748b', position = 'bottom') {
                const px = this.cx + x * this.scale;
                const py = this.cy - y * this.scale;

                this.ctx.fillStyle = color;
                this.ctx.font = 'bold 12px "Noto Sans JP", sans-serif';
                this.ctx.textAlign = 'center';
                
                if (position === 'bottom') {
                    this.ctx.textBaseline = 'top';
                    this.ctx.fillText("â†‘", px, py + 8);
                    this.ctx.fillText(text, px, py + 22);
                } else {
                    this.ctx.textBaseline = 'bottom';
                    this.ctx.fillText("â†“", px, py - 8);
                    this.ctx.fillText(text, px, py - 22);
                }
            }

            // offsetP: xè»¸æ–¹å‘ã¸ã®å¹³è¡Œç§»å‹•é‡ (é ‚ç‚¹ã®xåº§æ¨™)
            // æ•°å¼: y = a(x - p)^2
            drawQuadratic(a, offsetP, color = '#0f766e', isDashed = false) {
                this.ctx.strokeStyle = color;
                this.ctx.lineWidth = 2.5;
                if (isDashed) {
                    this.ctx.setLineDash([5, 5]);
                    this.ctx.lineWidth = 1.5;
                } else {
                    this.ctx.setLineDash([]);
                }

                this.ctx.beginPath();
                let started = false;
                const step = 0.2;
                
                for (let px = 0; px <= this.canvas.width; px += step) {
                    const x = (px - this.cx) / this.scale;
                    // y = a(x - p)^2
                    const y = a * (x - offsetP) * (x - offsetP);
                    const py = this.cy - y * this.scale;

                    if (py >= -100 && py <= this.canvas.height + 100) {
                        if (!started) { this.ctx.moveTo(px, py); started = true; }
                        else { this.ctx.lineTo(px, py); }
                    }
                }
                this.ctx.stroke();
                this.ctx.setLineDash([]); 

                if (!isDashed) {
                    // é ‚ç‚¹
                    const vertexX = this.cx + offsetP * this.scale;
                    const vertexY = this.cy;
                    this.ctx.fillStyle = color;
                    this.ctx.beginPath();
                    this.ctx.arc(vertexX, vertexY, 5, 0, Math.PI * 2);
                    this.ctx.fill();
                    
                    // è»¸ï¼ˆç ´ç·šï¼‰
                    this.ctx.strokeStyle = color;
                    this.ctx.lineWidth = 1;
                    this.ctx.setLineDash([3, 3]);
                    this.ctx.beginPath();
                    this.ctx.moveTo(vertexX, 0);
                    this.ctx.lineTo(vertexX, this.canvas.height);
                    this.ctx.stroke();
                    this.ctx.setLineDash([]);
                }
            }
        }

        /* --- 1. ç‚¹ã®ç§»å‹•ã‚°ãƒ©ãƒ• --- */
        const pointDrawer = new GraphDrawer('pointMoveCanvas', 24, 0.5); 
        pointDrawer.init();
        // yåº§æ¨™ã‚’2ã«ãšã‚‰ã—ã¦æç”»ï¼ˆè»¸ã¨è¢«ã‚‰ãªã„ã‚ˆã†ã«ï¼‰
        pointDrawer.drawPoint(0, 2, "A(0, 2)", "#64748b");
        pointDrawer.drawPoint(3, 2, "A'(3, 2)", "#0ea5e9");
        pointDrawer.drawArrow(0, 2, 3, 2, "#0ea5e9");

        /* --- 2. ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ --- */
        const simDrawer = new GraphDrawer('graphCanvas', 18, 0.7);
        const pInput = document.getElementById('pValue');
        const displayP = document.getElementById('displayP');
        const equationFull = document.getElementById('equationFull');

        function updateSim() {
            const p = parseInt(pInput.value);
            
            // è¡¨ç¤ºã®æ›´æ–°
            displayP.textContent = (p > 0 ? "+" + p : p);
            
            // å¼ã®æ–‡å­—åˆ—ç”Ÿæˆ: y = (x - p)^2
            if (p === 0) {
                equationFull.textContent = "xÂ²";
            } else if (p > 0) {
                // pãŒæ­£ãªã‚‰ã€å¼ã®ä¸­ã¯ãƒã‚¤ãƒŠã‚¹ (ä¾‹: x - 3)
                equationFull.textContent = `(x - ${p})Â²`;
            } else {
                // pãŒè² ãªã‚‰ã€å¼ã®ä¸­ã¯ãƒ—ãƒ©ã‚¹ (ä¾‹: x + 2)
                equationFull.textContent = `(x + ${Math.abs(p)})Â²`;
            }

            simDrawer.init();
            
            // åŸºæº–ç·š y=x^2
            simDrawer.drawQuadratic(1, 0, '#94a3b8', true);
            
            // ç§»å‹•å¾Œã®ç·š y=(x-p)^2
            simDrawer.drawQuadratic(1, p, '#0284c7', false); // Sky-600
        }
        pInput.addEventListener('input', updateSim);
        updateSim();

        /* --- ç·´ç¿’å•é¡Œ --- */
        function checkAnswers() {
            const q1 = parseFloat(document.getElementById('q1').value);
            const q2 = parseFloat(document.getElementById('q2').value);
            const q3Str = document.getElementById('q3').value.replace(/\s+/g, '');
            
            const res1 = document.getElementById('res1');
            const res2 = document.getElementById('res2');
            const res3 = document.getElementById('res3');
            const feedback = document.getElementById('feedback');
            const graphArea = document.getElementById('practiceGraphArea');

            let correctCount = 0;

            // å•1-1: y=(x-4)^2 -> é ‚ç‚¹(4,0)
            if (q1 === 4) {
                res1.innerHTML = '<span class="text-green-600">âœ“</span>';
                document.getElementById('q1').classList.add('correct');
                document.getElementById('q1').classList.remove('wrong');
                correctCount++;
            } else {
                res1.innerHTML = '';
                document.getElementById('q1').classList.add('wrong');
                document.getElementById('q1').classList.remove('correct');
            }

            // å•1-2: y=3(x+2)^2 -> é ‚ç‚¹(-2,0)
            if (q2 === -2) {
                res2.innerHTML = '<span class="text-green-600">âœ“</span>';
                document.getElementById('q2').classList.add('correct');
                document.getElementById('q2').classList.remove('wrong');
                correctCount++;
            } else {
                res2.innerHTML = '';
                document.getElementById('q2').classList.add('wrong');
                document.getElementById('q2').classList.remove('correct');
            }

            // å•2: +1ç§»å‹• -> å¼ã¯ (x-1)^2 ãªã®ã§ç­”ãˆã¯ "-1"
            if (q3Str === "-1") {
                res3.innerHTML = '<span class="text-green-600">âœ“</span>';
                document.getElementById('q3').classList.add('correct');
                document.getElementById('q3').classList.remove('wrong');
                correctCount++;
            } else {
                res3.innerHTML = '';
                document.getElementById('q3').classList.add('wrong');
                document.getElementById('q3').classList.remove('correct');
            }

            if (correctCount === 3) {
                feedback.textContent = "å…¨å•æ­£è§£ã§ã™ï¼ç¬¦å·ã®ç½ ã‚’è¦‹ç ´ã‚Šã¾ã—ãŸã­ğŸ‰";
                feedback.className = "mt-3 text-sm font-bold text-emerald-600 animate-bounce";
            } else {
                feedback.textContent = "æƒœã—ã„ï¼ã‚«ãƒƒã‚³ã®ä¸­ã®ãƒ—ãƒ©ã‚¹ãƒã‚¤ãƒŠã‚¹ã«æ³¨æ„ã§ã™ã€‚";
                feedback.className = "mt-3 text-sm font-bold text-slate-500";
            }

            // ã‚°ãƒ©ãƒ•æç”»
            graphArea.classList.remove('hidden');
            
            // å•1ã‚°ãƒ©ãƒ•
            const pDrawer1 = new GraphDrawer('practiceCanvas1', 18, 0.7);
            pDrawer1.init();
            pDrawer1.drawQuadratic(1, 4, '#0369a1'); // y=(x-4)^2
            pDrawer1.drawVertexLabel(4, 0, "é ‚ç‚¹4", '#0369a1', 'bottom');
            
            pDrawer1.drawQuadratic(3, -2, '#4338ca'); // y=3(x+2)^2
            pDrawer1.drawVertexLabel(-2, 0, "é ‚ç‚¹-2", '#4338ca', 'bottom');

            // å•2ã‚°ãƒ©ãƒ•
            const pDrawer2 = new GraphDrawer('practiceCanvas2', 18, 0.7);
            pDrawer2.init();
            pDrawer2.drawQuadratic(2, 0, '#94a3b8', true); // y=2x^2
            pDrawer2.drawQuadratic(2, 1, '#e11d48'); // y=2(x-1)^2
            pDrawer2.drawVertexLabel(1, 0, "é ‚ç‚¹1", '#e11d48', 'bottom');
            pDrawer2.drawArrow(0, 0, 1, 0, '#e11d48');
        }
    </script>
</body>
</html>
